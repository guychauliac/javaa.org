<html>
    <body onload="getAccessToken()">
        <script>
            function getAccessToken(){
                setCode("Waiting for code...");
                setToken("Waiting for token...");
                var code = getParameterByName("code");
                setCode(code);
                getAccessTokenFromAuthorizationServer(code);
            }
            
            function getAccessTokenFromAuthorizationServer(code){
            	fetch('https://dev-chabernac.eu.auth0.com/oauth/token', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded'
                    },
                    body: 'grant_type=authorization_code&client_id=V5toQWdVGflZKYk7sqhi2TvPAxNUAyqA&client_secret=o8IQSja5NW-YQZQbXJTk1rsiP6o5vPycG07hsx3ni0sOEhppiYP4Oz4UeHLNkIFQ&code=' + code + '&redirect_uri=https://www.maxxq.org/callback.html'
                })
                .then(response => response.json())
                .then(response => setToken(JSON.stringify(response)))
            }
  
            function setCode(code){
                document.getElementById("code").textContent = "Code: " + code;
            }
            
            function setToken(token){
                document.getElementById("token").textContent = "Token: " + token;
            }

            function getParameterByName(name, url = window.location.href) {
                name = name.replace(/[\[\]]/g, '\\$&');
                var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),
                    results = regex.exec(url);
                if (!results) return null;
                if (!results[2]) return '';
                return decodeURIComponent(results[2].replace(/\+/g, ' '));
            }
        </script>
    <div id="code">Received code will go here</div>
    <div id="token">Received access token will go here</div>
    </body>
</html>